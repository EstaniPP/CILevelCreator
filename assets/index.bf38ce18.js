var se=Object.defineProperty,ne=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z=(e,t)=>{for(var n in t||(t={}))re.call(t,n)&&F(e,n,t[n]);if(V)for(var n of V(t))oe.call(t,n)&&F(e,n,t[n]);return e},U=(e,t)=>ne(e,ae(t));import{j as s,a as w,u as i,b as l,T as L,S as ce,M as N,i as le,p as ie,z as de,c as ue,Z as he,h as T,G as me,Y as fe,r as h,B as v,C as M,A as B,I as D,d as P,F as y,e as R,f as ge,g as $,s as pe,k as ve,R as x,l as ye,N as H,m as G,n as Y,o as C,L as j,q as we,t as Ce}from"./vendor.2191107c.js";const Ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}};Ee();var Ie="/CILevelCreator/assets/Logo.077e19fb.svg";const Se=({rowIndex:e,columnIndex:t,matrix:n,onTileClick:o})=>s("div",{className:`field ${n[e][t]?"back-black":"back-white"}`,style:{cursor:o&&"pointer"},onClick:()=>o&&o(e,t)}),Z=({matrix:e,onTileClick:t})=>s("div",{className:"board",children:e.map((n,o)=>s("div",{children:n.map((a,r)=>s(Se,{rowIndex:o,columnIndex:r,matrix:e,onTileClick:t},`${r}${o}`))},o))});const q=w(!1),J=w("success"),k=w("medium"),W=w(!1),X=w(""),Q=w(!1),ee=()=>{const[e,t]=i(k);return l("div",{className:"FormWrapper",children:[s(L,{style:{marginRight:"10px"},children:"Difficulty:"}),l(ce,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e,onChange:o=>{t(o.target.value)},children:[s(N,{value:"easy",children:"Easy"}),s(N,{value:"medium",children:"Medium"}),s(N,{value:"hard",children:"Hard"})]})]})},Ne=e=>{const t=e[0].difficulty,n=window.document.createElement("a");n.setAttribute("href","data:json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4))),n.setAttribute("download",t+".json"),n.style.display="none",window.document.body.appendChild(n),n.click(),window.document.body.removeChild(n)},b=e=>{let t="";return e.rows.forEach(n=>{t+=n.config}),parseInt(t,2).toString()},p={VITE_APIKEY:"AIzaSyC8k7h6v4HEv7qFNMri1mh7ZyZXCBDywi8",VITE_AUTHDOMAIN:"color-inc-levels-api.firebaseapp.com",VITE_PROJECTID:"color-inc-levels-api",VITE_STORAGEBUCKET:"color-inc-levels-api.appspot.com",VITE_MESSAGINGSENDERID:"425715278139",VITE_APPID:"1:425715278139:web:d800af3741e7c29feed71e",BASE_URL:"/CILevelCreator/",MODE:"production",DEV:!1,PROD:!0},be={apiKey:p.VITE_APIKEY,authDomain:p.VITE_AUTHDOMAIN,projectId:p.VITE_PROJECTID,storageBucket:p.VITE_STORAGEBUCKET,messagingSenderId:p.VITE_MESSAGINGSENDERID,appId:p.VITE_APPID},Ae=le(be),E=ie(Ae),Le=async e=>{const t=T(E,e.difficulty,b(e));return(await me(t)).exists()?!1:(await fe(T(E,e.difficulty,b(e)),U(z({},e),{id:b(e)})),!0)},Te=async e=>{const t=[];return(await de(ue(E,e))).forEach(n=>{t.push(n.data())}),t},xe=async(e,t,n)=>{try{return await he(T(E,e,t.toString())),n.filter(o=>o.id!==t)}catch(o){throw o.message}},Me=async e=>Le(e),Be=async e=>await Te(e),De=async(e,t,n)=>await xe(e,t,n),Pe=(e,t)=>{const n={id:0,difficulty:t,rows:[]};return e.forEach(o=>{const a=o.reduce((r,c)=>r+c.toString(),"");n.rows.push({config:a})}),n},Re=({matrix:e,size:t})=>{const[,n]=i(J),[o,a]=h.exports.useState(!1),[,r]=i(q),c=async(m,d)=>{a(!0);const g=await Me(Pe(m,d));n(g?"success":"error"),a(!1),r(!0)};return h.exports.useEffect(()=>{r(!1)},[t,e]),s(v,{disabled:o,variant:"contained",onClick:()=>c(e,t),children:"Upload"})};const ke=()=>{const[e]=i(J),[t,n]=i(q);return s(M,{in:t,children:s(B,{severity:e,action:s(D,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{n(!1)},children:s(P,{})}),sx:{mb:2},children:e==="success"?"Level created succesfully!":"Level already exists, please create a new one."})})},Oe={easy:4,medium:6,hard:8};function K(){const[e]=i(k),[t,n]=h.exports.useState(Array(6).fill(0).map(()=>Array(6).fill(0)));return h.exports.useEffect(()=>{const a=Oe[e];n(new Array(a).fill(0).map(()=>Array(6).fill(0)))},[e]),l(y,{children:[s(ke,{}),l(R,{className:"Card",children:[s("h1",{children:"Color Inc level creator"}),l("div",{className:"Form",children:[s(ee,{}),s(Z,{matrix:t,onTileClick:(a,r)=>{const c=t[a][r]?0:1;t[a][r]=c,n([...t])}})]}),s(Re,{matrix:t,size:e})]})]})}const _e=()=>{const[e,t]=i(Q);return s(M,{in:e,children:s(B,{severity:"success",action:s(D,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{t(!1)},children:s(P,{})}),sx:{mb:2},children:"Level deleted succesfully!"})})};function Ve(){var I;const[e,t]=h.exports.useState([]),[n,o]=h.exports.useState([]),[a,r]=h.exports.useState(0),[c]=i(k),[,m]=i(Q),d=u=>u.rows.map(S=>S.config.split("").map(te=>parseInt(te)));h.exports.useEffect(()=>{(async()=>{const S=await Be(c);t(S),r(0)})()},[c]),h.exports.useEffect(()=>{e.length!==0&&a<e.length&&o(d(e[a]))},[e,a]);const g=()=>{a>0&&r(u=>u-1)},_=()=>{a<e.length-1&&r(u=>u+1)},f=async()=>{var u;t(await De(c,(u=e[a])==null?void 0:u.id,e)),m(!0)};return l(y,{children:[s(_e,{}),l(R,{className:"Card",children:[s("h1",{children:"Manage Levels"}),s(ee,{}),e.length===0&&l(L,{children:["There are no ",c," levels."]}),e.length>0&&l(y,{children:[l("div",{className:"LevelPaginator",children:[s(v,{className:"PaginationButton",onClick:g,children:"<"}),s(L,{className:"Typography",children:(I=e[a])==null?void 0:I.id}),s(v,{className:"PaginationButton",onClick:_,children:">"})]}),s(Z,{matrix:n}),s(v,{className:"Button",style:{marginBottom:"20px"},onClick:f,variant:"contained",color:"error",children:"Delete level"}),s(v,{className:"Button",onClick:()=>Ne(e),variant:"contained",children:"Download levels"})]})]})]})}const Fe=ge("CISignedInUser",null);function O(){const[e,t]=i(Fe),[,n]=i(X);return{user:e,signin:async(r,c)=>{const m=$();try{const d=await pe(m,r,c);if(d){const g=d.user;return t(g),!0}}catch(d){console.error(d.code),n(d.code)}return!1},signout:()=>{const r=$();ve(r).then(()=>{t(null)}).catch(c=>{console.log(c)})}}}const ze=()=>{const[e,t]=i(W),[n]=i(X);return s(M,{in:e,children:s(B,{severity:"error",action:s(D,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{t(!1)},children:s(P,{})}),sx:{mb:2},children:n==="auth/invalid-email"||n==="auth/invalid-password"?"Invalid email or password.":"An unexpected error has occured."})})};function Ue(){const{user:e,signin:t}=O(),[,n]=i(W),[o,a]=x.useState(""),[r,c]=x.useState(""),m=ye();return l(y,{children:[s(ze,{}),e&&s(H,{to:"/CILevelCreator/create"}),l(R,{className:"Card",children:[s("h1",{children:"Login"}),l("form",{onSubmit:async f=>{f.preventDefault(),await t(o,r)?m("/CILevelCreator/create"):n(!0)},children:[s(G,{className:"TextField",onChange:f=>{a(f.target.value)},value:o,label:"Email",variant:"standard"}),s(G,{className:"TextField",onChange:f=>{c(f.target.value)},value:r,label:"Password",variant:"standard",type:"password"}),s(v,{variant:"contained",type:"submit",children:"Login"})]})]})]})}const $e=()=>{const{user:e,signout:t}=O();return l("nav",{children:[s("img",{className:"imgLogo",src:Ie,alt:"PipPop! logo"}),e&&l("ul",{children:[s(j,{to:"create",children:s("li",{className:"nav",children:"Create"})}),s(j,{to:"manage",children:s("li",{className:"nav",children:"Manage"})}),s("li",{className:"nav",onClick:t,children:"Logout"})]})]})},A=({children:e})=>{const{user:t}=O();return s(y,{children:t?e:s(H,{to:"login"})})};function Ge(){return l(y,{children:[s($e,{}),s("div",{className:"App",children:l(Y,{children:[s(C,{path:"*",element:s(A,{children:s(K,{})})}),s(C,{path:"/login",element:s(Ue,{})}),s(C,{path:"/manage",element:s(A,{children:s(Ve,{})})}),s(C,{path:"/create",element:s(A,{children:s(K,{})})})]})})]})}we.render(s(x.StrictMode,{children:s(Ce,{children:s(Y,{children:s(C,{path:"/CILevelCreator/*",element:s(Ge,{})})})})}),document.getElementById("root"));
